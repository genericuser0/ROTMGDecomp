package robotlegs.bender.extensions.eventCommandMap.impl
{
   import flash.events.IEventDispatcher;
   import flash.utils.describeType;
   import org.swiftsuspenders.Injector;
   import robotlegs.bender.extensions.commandCenter.api.ICommandMapping;
   import robotlegs.bender.extensions.commandCenter.api.ICommandTrigger;
   import robotlegs.bender.extensions.commandCenter.impl.CommandMappingList;
   
   public class EventCommandTrigger implements ICommandTrigger
   {
      
      {
         method
         name null
         returns null
         
         body
         maxstack 1
         localcount 1
         initscopedepth 3
         maxscopedepth 4
         
         code
         getlocal_0
         pushscope
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private const _mappings:Vector.<ICommandMapping>;
      
      private const _mappingList:CommandMappingList;
      
      private var _dispatcher:IEventDispatcher;
      
      private var _type:String;
      
      private var _executor:EventCommandExecutor;
      
      public function EventCommandTrigger(param1:Injector, param2:IEventDispatcher, param3:String, param4:Class = null)
      {
         method
         name null
         flag HAS_OPTIONAL
         param Qname(PackageNamespace("org.swiftsuspenders"),"Injector")
         param Qname(PackageNamespace("flash.events"),"IEventDispatcher")
         param Qname(PackageNamespace(""),"String")
         param Qname(PackageNamespace(""),"Class")
         optional null
         returns null
         
         body
         maxstack 6
         localcount 5
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getlex Multiname("Vector",[PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),PackageNamespace("__AS3__.vec")])
         getlex Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.api"),"ICommandMapping")
         applytype 1
         construct 0
         initproperty Qname(PrivateNamespace(null,"1090"),"_mappings")
         getlocal_0
         findpropstrict Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.impl"),"CommandMappingList")
         constructprop Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.impl"),"CommandMappingList") 0
         initproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getlocal_0
         constructsuper 0
         getlocal_0
         getlocal_2
         initproperty Qname(PrivateNamespace(null,"1090"),"_dispatcher")
         getlocal_0
         getlocal_3
         initproperty Qname(PrivateNamespace(null,"1090"),"_type")
         getlocal_0
         findpropstrict Qname(PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),"EventCommandExecutor")
         getlocal_0
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getlocal_1
         getlocal 4
         constructprop Qname(PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),"EventCommandExecutor") 4
         initproperty Qname(PrivateNamespace(null,"1090"),"_executor")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function addMapping(param1:ICommandMapping) : void
      {
         trait method Qname(PackageNamespace(""),"addMapping")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.api"),"ICommandMapping")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getlocal_1
         callpropvoid Qname(PrivateNamespace(null,"1090"),"verifyCommandClass") 1
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getproperty Qname(PackageNamespace(""),"tail")
         iffalse ofs0022
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getproperty Qname(PackageNamespace(""),"tail")
         getlocal_1
         setproperty Qname(Namespace("robotlegs.bender.extensions.commandCenter.api:ICommandMapping"),"next")
         jump ofs002f
         ofs0022:getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getlocal_1
         setproperty Qname(PackageNamespace(""),"head")
         getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"1090"),"addListener") 0
         ofs002f:returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function removeMapping(param1:ICommandMapping) : void
      {
         trait method Qname(PackageNamespace(""),"removeMapping")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.api"),"ICommandMapping")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getlocal_1
         callpropvoid Qname(PackageNamespace(""),"remove") 1
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_mappingList")
         getproperty Qname(PackageNamespace(""),"head")
         iftrue ofs001b
         getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"1090"),"removeListener") 0
         ofs001b:returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function verifyCommandClass(param1:ICommandMapping) : void
      {
         trait method Qname(PrivateNamespace(null,"1090"),"verifyCommandClass")
         dispid 0
         method
         name null
         flag NEED_ACTIVATION
         param Qname(PackageNamespace("robotlegs.bender.extensions.commandCenter.api"),"ICommandMapping")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 8
         initscopedepth 5
         maxscopedepth 8
         
         code
         getlocal_0
         pushscope
         newactivation
         dup
         setlocal_2
         pushscope
         getscopeobject 1
         getlocal_1
         setslot 1
         pushbyte 0
         setlocal 4
         findpropstrict Qname(PackageNamespace("flash.utils"),"describeType")
         getscopeobject 1
         getslot 1
         getproperty Qname(Namespace("robotlegs.bender.extensions.commandCenter.api:ICommandMapping"),"commandClass")
         callproperty Qname(PackageNamespace("flash.utils"),"describeType") 1
         getproperty Multiname("factory",[PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger")])
         getproperty Multiname("method",[PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger")])
         checkfilter
         coerce_a
         setlocal 5
         getlex Qname(PackageNamespace(""),"XMLList")
         pushstring ""
         construct 1
         setlocal_3
         jump ofs005d
         ofs0036:label
         getlocal 5
         getlocal 4
         nextvalue
         dup
         setlocal 6
         dup
         setlocal 7
         pushwith
         getlex MultinameA("name",[PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger")])
         pushstring "execute"
         equals
         iffalse ofs0058
         getlocal_3
         getlocal 4
         getlocal 6
         setproperty MultinameL([PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger")])
         ofs0058:popscope
         kill 7
         kill 6
         ofs005d:hasnext2 5 4
         iftrue ofs0036
         kill 5
         kill 4
         getlocal_3
         kill 3
         callproperty Multiname("length",[PrivateNamespace(null,"1090"),PrivateNamespace(null,"2021"),PackageNamespace(""),PackageNamespace("robotlegs.bender.extensions.eventCommandMap.impl"),PackageInternalNs("robotlegs.bender.extensions.eventCommandMap.impl"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger"),StaticProtectedNs("robotlegs.bender.extensions.eventCommandMap.impl:EventCommandTrigger")]) 0
         pushbyte 0
         ifne ofs0082
         findpropstrict Qname(PackageNamespace(""),"Error")
         pushstring "Command Class must expose an execute method"
         constructprop Qname(PackageNamespace(""),"Error") 1
         throw
         ofs0082:returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function addListener() : void
      {
         trait method Qname(PrivateNamespace(null,"1090"),"addListener")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_dispatcher")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_type")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_executor")
         getproperty Qname(PackageNamespace(""),"execute")
         callpropvoid Qname(Namespace("flash.events:IEventDispatcher"),"addEventListener") 2
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function removeListener() : void
      {
         trait method Qname(PrivateNamespace(null,"1090"),"removeListener")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_dispatcher")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_type")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"1090"),"_executor")
         getproperty Qname(PackageNamespace(""),"execute")
         callpropvoid Qname(Namespace("flash.events:IEventDispatcher"),"removeEventListener") 2
         returnvoid
         end ; code
         end ; body
         end ; method
      }
   }
}
