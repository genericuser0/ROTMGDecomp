package com.company.assembleegameclient.game
{
   import com.company.assembleegameclient.parameters.Parameters;
   import flash.events.KeyboardEvent;
   import flash.events.MouseEvent;
   import kabam.rotmg.chat.model.ChatMessage;
   import kabam.rotmg.core.StaticInjectorContext;
   import kabam.rotmg.game.signals.AddTextLineSignal;
   
   public class IdleWatcher
   {
      
      private static const MINUTE_IN_MS:int = 60000.0;
      
      private static const FIRST_WARNING_MINUTES:int = 10;
      
      private static const SECOND_WARNING_MINUTES:int = 15;
      
      private static const KICK_MINUTES:int = 20;
      
      {
         method
         name null
         returns null
         
         body
         maxstack 3
         localcount 1
         initscopedepth 3
         maxscopedepth 4
         
         code
         getlocal_0
         pushscope
         findproperty Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         pushbyte 60
         pushshort 1000
         multiply
         initproperty Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         findproperty Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         pushbyte 10
         initproperty Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         findproperty Qname(PrivateNamespace(null,"752"),"SECOND_WARNING_MINUTES")
         pushbyte 15
         initproperty Qname(PrivateNamespace(null,"752"),"SECOND_WARNING_MINUTES")
         findproperty Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         pushbyte 20
         initproperty Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public var gs_:GameSprite = null;
      
      public var idleTime_:int = 0;
      
      private var addTextLine:AddTextLineSignal;
      
      public function IdleWatcher()
      {
         method
         name null
         returns null
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         constructsuper 0
         getlocal_0
         getlex Qname(PackageNamespace("kabam.rotmg.core"),"StaticInjectorContext")
         callproperty Qname(PackageNamespace(""),"getInjector") 0
         getlex Qname(PackageNamespace("kabam.rotmg.game.signals"),"AddTextLineSignal")
         callproperty Qname(PackageNamespace(""),"getInstance") 1
         initproperty Qname(PrivateNamespace(null,"752"),"addTextLine")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function start(param1:GameSprite) : void
      {
         trait method Qname(PackageNamespace(""),"start")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("com.company.assembleegameclient.game"),"GameSprite")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getlocal_1
         initproperty Qname(PackageNamespace(""),"gs_")
         getlocal_0
         pushbyte 0
         initproperty Qname(PackageNamespace(""),"idleTime_")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"gs_")
         getproperty Qname(PackageNamespace(""),"stage")
         getlex Qname(PackageNamespace("flash.events"),"MouseEvent")
         getproperty Qname(PackageNamespace(""),"MOUSE_MOVE")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"onMouseMove")
         callpropvoid Qname(PackageNamespace(""),"addEventListener") 2
         getlocal_0
         getproperty Qname(PackageNamespace(""),"gs_")
         getproperty Qname(PackageNamespace(""),"stage")
         getlex Qname(PackageNamespace("flash.events"),"KeyboardEvent")
         getproperty Qname(PackageNamespace(""),"KEY_DOWN")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"onKeyDown")
         callpropvoid Qname(PackageNamespace(""),"addEventListener") 2
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function update(param1:int) : Boolean
      {
         trait method Qname(PackageNamespace(""),"update")
         dispid 0
         method
         name null
         param Qname(PackageNamespace(""),"int")
         returns Qname(PackageNamespace(""),"Boolean")
         
         body
         maxstack 3
         localcount 3
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         convert_i
         setlocal_2
         getlocal_0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         getlocal_1
         add
         initproperty Qname(PackageNamespace(""),"idleTime_")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         getlex Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         ifnlt ofs0025
         pushfalse
         returnvalue
         ofs0025:getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         getlex Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         greaterequals
         dup
         iffalse ofs0044
         pop
         getlocal_2
         getlex Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         lessthan
         ofs0044:iffalse ofs0057
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"addTextLine")
         getlocal_0
         callproperty Qname(PrivateNamespace(null,"752"),"makeFirstWarning") 0
         callpropvoid Qname(PackageNamespace(""),"dispatch") 1
         pushfalse
         returnvalue
         ofs0057:getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         getlex Qname(PrivateNamespace(null,"752"),"SECOND_WARNING_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         greaterequals
         dup
         iffalse ofs0076
         pop
         getlocal_2
         getlex Qname(PrivateNamespace(null,"752"),"SECOND_WARNING_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         lessthan
         ofs0076:iffalse ofs0089
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"addTextLine")
         getlocal_0
         callproperty Qname(PrivateNamespace(null,"752"),"makeSecondWarning") 0
         callpropvoid Qname(PackageNamespace(""),"dispatch") 1
         pushfalse
         returnvalue
         ofs0089:getlocal_0
         getproperty Qname(PackageNamespace(""),"idleTime_")
         getlex Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         greaterequals
         dup
         iffalse ofs00a8
         pop
         getlocal_2
         getlex Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         getlex Qname(PrivateNamespace(null,"752"),"MINUTE_IN_MS")
         multiply
         lessthan
         ofs00a8:iffalse ofs00bb
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"addTextLine")
         getlocal_0
         callproperty Qname(PrivateNamespace(null,"752"),"makeThirdWarning") 0
         callpropvoid Qname(PackageNamespace(""),"dispatch") 1
         pushtrue
         returnvalue
         ofs00bb:pushfalse
         returnvalue
         end ; code
         end ; body
         end ; method
      }
      
      private function makeFirstWarning() : ChatMessage
      {
         trait method Qname(PrivateNamespace(null,"752"),"makeFirstWarning")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         
         body
         maxstack 3
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         findpropstrict Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         constructprop Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage") 0
         coerce Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         setlocal_1
         getlocal_1
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"ERROR_CHAT_NAME")
         setproperty Qname(PackageNamespace(""),"name")
         getlocal_1
         pushstring "You have been idle for "
         getlex Qname(PrivateNamespace(null,"752"),"FIRST_WARNING_MINUTES")
         add
         pushstring " minutes, you will be disconnected if you are idle for "
         add
         pushstring "more than "
         add
         getlex Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         add
         pushstring " minutes."
         add
         setproperty Qname(PackageNamespace(""),"text")
         getlocal_1
         returnvalue
         end ; code
         end ; body
         end ; method
      }
      
      private function makeSecondWarning() : ChatMessage
      {
         trait method Qname(PrivateNamespace(null,"752"),"makeSecondWarning")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         
         body
         maxstack 3
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         findpropstrict Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         constructprop Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage") 0
         coerce Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         setlocal_1
         getlocal_1
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"ERROR_CHAT_NAME")
         setproperty Qname(PackageNamespace(""),"name")
         getlocal_1
         pushstring "You have been idle for "
         getlex Qname(PrivateNamespace(null,"752"),"SECOND_WARNING_MINUTES")
         add
         pushstring " minutes, you will be disconnected if you are idle for "
         add
         pushstring "more than "
         add
         getlex Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         add
         pushstring " minutes."
         add
         setproperty Qname(PackageNamespace(""),"text")
         getlocal_1
         returnvalue
         end ; code
         end ; body
         end ; method
      }
      
      private function makeThirdWarning() : ChatMessage
      {
         trait method Qname(PrivateNamespace(null,"752"),"makeThirdWarning")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         
         body
         maxstack 3
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         findpropstrict Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         constructprop Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage") 0
         coerce Qname(PackageNamespace("kabam.rotmg.chat.model"),"ChatMessage")
         setlocal_1
         getlocal_1
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"ERROR_CHAT_NAME")
         setproperty Qname(PackageNamespace(""),"name")
         getlocal_1
         pushstring "You have been idle for "
         getlex Qname(PrivateNamespace(null,"752"),"KICK_MINUTES")
         add
         pushstring " minutes, disconnecting."
         add
         setproperty Qname(PackageNamespace(""),"text")
         getlocal_1
         returnvalue
         end ; code
         end ; body
         end ; method
      }
      
      public function stop() : void
      {
         trait method Qname(PackageNamespace(""),"stop")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PackageNamespace(""),"gs_")
         getproperty Qname(PackageNamespace(""),"stage")
         getlex Qname(PackageNamespace("flash.events"),"MouseEvent")
         getproperty Qname(PackageNamespace(""),"MOUSE_MOVE")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"onMouseMove")
         callpropvoid Qname(PackageNamespace(""),"removeEventListener") 2
         getlocal_0
         getproperty Qname(PackageNamespace(""),"gs_")
         getproperty Qname(PackageNamespace(""),"stage")
         getlex Qname(PackageNamespace("flash.events"),"KeyboardEvent")
         getproperty Qname(PackageNamespace(""),"KEY_DOWN")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"752"),"onKeyDown")
         callpropvoid Qname(PackageNamespace(""),"removeEventListener") 2
         getlocal_0
         pushnull
         initproperty Qname(PackageNamespace(""),"gs_")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function onMouseMove(param1:MouseEvent) : void
      {
         trait method Qname(PrivateNamespace(null,"752"),"onMouseMove")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("flash.events"),"MouseEvent")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         pushbyte 0
         initproperty Qname(PackageNamespace(""),"idleTime_")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function onKeyDown(param1:KeyboardEvent) : void
      {
         trait method Qname(PrivateNamespace(null,"752"),"onKeyDown")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("flash.events"),"KeyboardEvent")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         pushbyte 0
         initproperty Qname(PackageNamespace(""),"idleTime_")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
   }
}
