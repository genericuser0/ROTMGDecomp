package kabam.rotmg.stage3D
{
   import com.company.assembleegameclient.engine3d.Model3D;
   import com.company.assembleegameclient.parameters.Parameters;
   import com.company.assembleegameclient.util.Stage3DProxy;
   import com.company.assembleegameclient.util.StageProxy;
   import flash.display3D.Context3DBlendFactor;
   import flash.display3D.Context3DCompareMode;
   import flash.events.ErrorEvent;
   import flash.events.Event;
   import kabam.rotmg.stage3D.graphic3D.Graphic3DHelper;
   import kabam.rotmg.stage3D.graphic3D.IndexBufferFactory;
   import kabam.rotmg.stage3D.graphic3D.TextureFactory;
   import kabam.rotmg.stage3D.graphic3D.VertexBufferFactory;
   import kabam.rotmg.stage3D.proxies.Context3DProxy;
   import org.swiftsuspenders.Injector;
   import robotlegs.bender.framework.api.IConfig;
   
   public class Stage3DConfig implements IConfig
   {
      
      public static const WIDTH:int = 600;
      
      public static const HALF_WIDTH:int = 300.0;
      
      public static const HEIGHT:int = 600;
      
      public static const HALF_HEIGHT:int = 300.0;
      
      {
         method
         name null
         returns null
         
         body
         maxstack 3
         localcount 1
         initscopedepth 3
         maxscopedepth 4
         
         code
         getlocal_0
         pushscope
         findproperty Qname(PackageNamespace(""),"WIDTH")
         pushshort 600
         initproperty Qname(PackageNamespace(""),"WIDTH")
         findproperty Qname(PackageNamespace(""),"HALF_WIDTH")
         getlex Qname(PackageNamespace(""),"WIDTH")
         pushbyte 2
         divide
         initproperty Qname(PackageNamespace(""),"HALF_WIDTH")
         findproperty Qname(PackageNamespace(""),"HEIGHT")
         pushshort 600
         initproperty Qname(PackageNamespace(""),"HEIGHT")
         findproperty Qname(PackageNamespace(""),"HALF_HEIGHT")
         getlex Qname(PackageNamespace(""),"HEIGHT")
         pushbyte 2
         divide
         initproperty Qname(PackageNamespace(""),"HALF_HEIGHT")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      [Inject]
      public var stageProxy:StageProxy;
      
      [Inject]
      public var injector:Injector;
      
      public var renderer:Renderer;
      
      private var stage3D:Stage3DProxy;
      
      public function Stage3DConfig()
      {
         method
         name null
         returns null
         
         body
         maxstack 1
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         constructsuper 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function configure() : void
      {
         trait method Qname(PackageNamespace(""),"configure")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"33"),"mapSingletons") 0
         getlocal_0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"stageProxy")
         pushbyte 0
         callproperty Qname(PackageNamespace(""),"getStage3Ds") 1
         initproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         getlex Qname(PackageNamespace("flash.events"),"ErrorEvent")
         getproperty Qname(PackageNamespace(""),"ERROR")
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"clearGpuRenderEvent")
         callpropvoid Qname(PackageNamespace(""),"addEventListener") 2
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         getlex Qname(PackageNamespace("flash.events"),"Event")
         getproperty Qname(PackageNamespace(""),"CONTEXT3D_CREATE")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"onContextCreate")
         callpropvoid Qname(PackageNamespace(""),"addEventListener") 2
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         callpropvoid Qname(PackageNamespace(""),"requestContext3D") 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function mapSingletons() : void
      {
         trait method Qname(PrivateNamespace(null,"33"),"mapSingletons")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D"),"Render3D")
         callproperty Qname(PackageNamespace(""),"map") 1
         callpropvoid Qname(PackageNamespace(""),"asSingleton") 0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D.graphic3D"),"TextureFactory")
         callproperty Qname(PackageNamespace(""),"map") 1
         callpropvoid Qname(PackageNamespace(""),"asSingleton") 0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D.graphic3D"),"IndexBufferFactory")
         callproperty Qname(PackageNamespace(""),"map") 1
         callpropvoid Qname(PackageNamespace(""),"asSingleton") 0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D.graphic3D"),"VertexBufferFactory")
         callproperty Qname(PackageNamespace(""),"map") 1
         callpropvoid Qname(PackageNamespace(""),"asSingleton") 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function onContextCreate(param1:Event) : void
      {
         trait method Qname(PrivateNamespace(null,"33"),"onContextCreate")
         dispid 0
         method
         name null
         param Qname(PackageNamespace("flash.events"),"Event")
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 5
         localcount 3
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         getlex Qname(PackageNamespace("flash.events"),"Event")
         getproperty Qname(PackageNamespace(""),"CONTEXT3D_CREATE")
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"onContextCreate")
         callpropvoid Qname(PackageNamespace(""),"removeEventListener") 2
         getlocal_0
         getproperty Qname(PrivateNamespace(null,"33"),"stage3D")
         callproperty Qname(PackageNamespace(""),"getContext3D") 0
         coerce Qname(PackageNamespace("kabam.rotmg.stage3D.proxies"),"Context3DProxy")
         setlocal_2
         getlocal_2
         callproperty Qname(PackageNamespace(""),"GetContext3D") 0
         getproperty Qname(PackageNamespace(""),"driverInfo")
         callproperty Qname(Namespace("http://adobe.com/AS3/2006/builtin"),"toLowerCase") 0
         pushstring "software"
         callproperty Qname(Namespace("http://adobe.com/AS3/2006/builtin"),"indexOf") 1
         pushbyte -1
         ifeq ofs0045
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         callpropvoid Qname(PackageNamespace(""),"clearGpuRender") 0
         ofs0045:getlocal_2
         getlex Qname(PackageNamespace(""),"WIDTH")
         getlex Qname(PackageNamespace(""),"HEIGHT")
         pushbyte 2
         pushtrue
         callpropvoid Qname(PackageNamespace(""),"configureBackBuffer") 4
         getlocal_2
         getlex Qname(PackageNamespace("flash.display3D"),"Context3DBlendFactor")
         getproperty Qname(PackageNamespace(""),"SOURCE_ALPHA")
         getlex Qname(PackageNamespace("flash.display3D"),"Context3DBlendFactor")
         getproperty Qname(PackageNamespace(""),"ONE_MINUS_SOURCE_ALPHA")
         callpropvoid Qname(PackageNamespace(""),"setBlendFactors") 2
         getlocal_2
         pushfalse
         getlex Qname(PackageNamespace("flash.display3D"),"Context3DCompareMode")
         getproperty Qname(PackageNamespace(""),"LESS_EQUAL")
         callpropvoid Qname(PackageNamespace(""),"setDepthTest") 2
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D.proxies"),"Context3DProxy")
         callproperty Qname(PackageNamespace(""),"map") 1
         getlocal_2
         callpropvoid Qname(PackageNamespace(""),"toValue") 1
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D.graphic3D"),"Graphic3DHelper")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         callpropvoid Qname(PackageNamespace(""),"map") 1
         getlocal_0
         getlocal_0
         getproperty Qname(PackageNamespace(""),"injector")
         getlex Qname(PackageNamespace("kabam.rotmg.stage3D"),"Renderer")
         callproperty Qname(PackageNamespace(""),"getInstance") 1
         initproperty Qname(PackageNamespace(""),"renderer")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"renderer")
         getlocal_2
         callproperty Qname(PackageNamespace(""),"GetContext3D") 0
         callpropvoid Qname(PackageNamespace(""),"init") 1
         getlex Qname(PackageNamespace("com.company.assembleegameclient.engine3d"),"Model3D")
         getlocal_2
         callproperty Qname(PackageNamespace(""),"GetContext3D") 0
         callpropvoid Qname(PackageNamespace(""),"Create3dBuffer") 1
         returnvoid
         end ; code
         end ; body
         end ; method
      }
   }
}
