package kabam.rotmg.game.commands
{
   import com.company.assembleegameclient.appengine.SavedCharacter;
   import com.company.assembleegameclient.game.GameSprite;
   import com.company.assembleegameclient.parameters.Parameters;
   import flash.utils.ByteArray;
   import io.decagames.rotmg.pets.data.PetsModel;
   import io.decagames.rotmg.seasonalEvent.data.SeasonalEventModel;
   import kabam.lib.net.impl.SocketServerModel;
   import kabam.lib.tasks.TaskMonitor;
   import kabam.rotmg.core.model.PlayerModel;
   import kabam.rotmg.core.signals.SetScreenSignal;
   import kabam.rotmg.game.model.GameInitData;
   import kabam.rotmg.servers.api.Server;
   import kabam.rotmg.servers.api.ServerModel;
   
   public class PlayGameCommand
   {
      
      public static const RECONNECT_DELAY:int = 2000;
      
      {
         method
         name null
         returns null
         
         body
         maxstack 2
         localcount 1
         initscopedepth 3
         maxscopedepth 4
         
         code
         getlocal_0
         pushscope
         findproperty Qname(PackageNamespace(""),"RECONNECT_DELAY")
         pushshort 2000
         initproperty Qname(PackageNamespace(""),"RECONNECT_DELAY")
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      [Inject]
      public var setScreen:SetScreenSignal;
      
      [Inject]
      public var data:GameInitData;
      
      [Inject]
      public var model:PlayerModel;
      
      [Inject]
      public var petsModel:PetsModel;
      
      [Inject]
      public var serverModel:ServerModel;
      
      [Inject]
      public var seasonalEventModel:SeasonalEventModel;
      
      [Inject]
      public var monitor:TaskMonitor;
      
      [Inject]
      public var socketServerModel:SocketServerModel;
      
      public function PlayGameCommand()
      {
         method
         name null
         returns null
         
         body
         maxstack 1
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         constructsuper 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      public function execute() : void
      {
         trait method Qname(PackageNamespace(""),"execute")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"isNewGame")
         iftrue ofs001b
         getlocal_0
         getproperty Qname(PackageNamespace(""),"socketServerModel")
         getlex Qname(PackageNamespace("kabam.rotmg.game.commands"),"PlayGameCommand")
         getproperty Qname(PackageNamespace(""),"RECONNECT_DELAY")
         setproperty Qname(PackageNamespace(""),"connectDelayMS")
         ofs001b:getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"366"),"recordCharacterUseInSharedObject") 0
         getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"366"),"makeGameView") 0
         getlocal_0
         callpropvoid Qname(PrivateNamespace(null,"366"),"updatePet") 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function updatePet() : void
      {
         trait method Qname(PrivateNamespace(null,"366"),"updatePet")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 2
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         getproperty Qname(PackageNamespace(""),"currentCharId")
         callproperty Qname(PackageNamespace(""),"getCharacterById") 1
         coerce Qname(PackageNamespace("com.company.assembleegameclient.appengine"),"SavedCharacter")
         setlocal_1
         getlocal_1
         iffalse ofs002b
         getlocal_0
         getproperty Qname(PackageNamespace(""),"petsModel")
         getlocal_1
         callproperty Qname(PackageNamespace(""),"getPetVO") 0
         callpropvoid Qname(PackageNamespace(""),"setActivePet") 1
         jump ofs0060
         ofs002b:getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         getproperty Qname(PackageNamespace(""),"currentCharId")
         coerce_a
         convert_b
         dup
         iffalse ofs0044
         pop
         getlocal_0
         getproperty Qname(PackageNamespace(""),"petsModel")
         callproperty Qname(PackageNamespace(""),"getActivePet") 0
         coerce_a
         convert_b
         ofs0044:dup
         iffalse ofs0052
         pop
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"isNewGame")
         not
         ofs0052:iffalse ofs0057
         returnvoid
         ofs0057:getlocal_0
         getproperty Qname(PackageNamespace(""),"petsModel")
         pushnull
         callpropvoid Qname(PackageNamespace(""),"setActivePet") 1
         ofs0060:returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function recordCharacterUseInSharedObject() : void
      {
         trait method Qname(PrivateNamespace(null,"366"),"recordCharacterUseInSharedObject")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 3
         localcount 1
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"data_")
         getproperty Multiname("charIdUseMap",[PrivateNamespace(null,"366"),PackageNamespace(""),PackageNamespace("kabam.rotmg.game.commands"),PrivateNamespace(null,"1439"),PackageInternalNs("kabam.rotmg.game.commands"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("kabam.rotmg.game.commands:PlayGameCommand"),StaticProtectedNs("kabam.rotmg.game.commands:PlayGameCommand")])
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"charId")
         findpropstrict Qname(PackageNamespace(""),"Date")
         constructprop Qname(PackageNamespace(""),"Date") 0
         callproperty Qname(Namespace("http://adobe.com/AS3/2006/builtin"),"getTime") 0
         setproperty MultinameL([PrivateNamespace(null,"366"),PackageNamespace(""),PackageNamespace("kabam.rotmg.game.commands"),PrivateNamespace(null,"1439"),PackageInternalNs("kabam.rotmg.game.commands"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("kabam.rotmg.game.commands:PlayGameCommand"),StaticProtectedNs("kabam.rotmg.game.commands:PlayGameCommand")])
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         callpropvoid Qname(PackageNamespace(""),"save") 0
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function makeGameView() : void
      {
         trait method Qname(PrivateNamespace(null,"366"),"makeGameView")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"void")
         
         body
         maxstack 11
         localcount 10
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         pushfalse
         setlocal_1
         getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"charId")
         callproperty Qname(PackageNamespace(""),"getCharacterById") 1
         coerce Qname(PackageNamespace("com.company.assembleegameclient.appengine"),"SavedCharacter")
         setlocal_2
         getlocal_2
         iffalse ofs0034
         findpropstrict Qname(PackageNamespace(""),"Boolean")
         findpropstrict Qname(PackageNamespace(""),"int")
         getlocal_2
         getproperty Qname(PackageNamespace(""),"charXML_")
         getproperty Multiname("IsChallenger",[PrivateNamespace(null,"366"),PackageNamespace(""),PackageNamespace("kabam.rotmg.game.commands"),PrivateNamespace(null,"1439"),PackageInternalNs("kabam.rotmg.game.commands"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("kabam.rotmg.game.commands:PlayGameCommand"),StaticProtectedNs("kabam.rotmg.game.commands:PlayGameCommand")])
         callproperty Qname(PackageNamespace(""),"int") 1
         callproperty Qname(PackageNamespace(""),"Boolean") 1
         convert_b
         setlocal_1
         jump ofs0042
         ofs0034:findpropstrict Qname(PackageNamespace(""),"Boolean")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"seasonalEventModel")
         getproperty Qname(PackageNamespace(""),"isChallenger")
         callproperty Qname(PackageNamespace(""),"Boolean") 1
         convert_b
         setlocal_1
         ofs0042:getlocal_1
         iffalse ofs0052
         getlex Qname(PackageNamespace("kabam.rotmg.servers.api"),"Server")
         getproperty Qname(PackageNamespace(""),"CHALLENGER_SERVER")
         convert_i
         jump ofs0059
         ofs0052:getlex Qname(PackageNamespace("kabam.rotmg.servers.api"),"Server")
         getproperty Qname(PackageNamespace(""),"NORMAL_SERVER")
         convert_i
         ofs0059:convert_i
         setlocal_3
         getlocal_0
         getproperty Qname(PackageNamespace(""),"serverModel")
         getlocal_3
         callpropvoid Qname(Namespace("kabam.rotmg.servers.api:ServerModel"),"setAvailableServers") 1
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"server")
         coerce Qname(PackageNamespace("kabam.rotmg.servers.api"),"Server")
         dup
         iftrue ofs007d
         pop
         getlocal_0
         getproperty Qname(PackageNamespace(""),"serverModel")
         callproperty Qname(Namespace("kabam.rotmg.servers.api:ServerModel"),"getServer") 0
         coerce Qname(PackageNamespace("kabam.rotmg.servers.api"),"Server")
         ofs007d:coerce Qname(PackageNamespace("kabam.rotmg.servers.api"),"Server")
         setlocal 4
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"isNewGame")
         iffalse ofs0096
         getlocal_0
         callproperty Qname(PrivateNamespace(null,"366"),"getInitialGameId") 0
         convert_i
         jump ofs009e
         ofs0096:getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"gameId")
         convert_i
         ofs009e:convert_i
         setlocal 5
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"createCharacter")
         convert_b
         setlocal 6
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"charId")
         convert_i
         setlocal 7
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"isNewGame")
         iffalse ofs00c6
         pushbyte -1
         jump ofs00ce
         ofs00c6:getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"keyTime")
         convert_i
         ofs00ce:convert_i
         setlocal 8
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"key")
         coerce Qname(PackageNamespace("flash.utils"),"ByteArray")
         setlocal 9
         getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         getlocal 7
         setproperty Qname(PackageNamespace(""),"currentCharId")
         getlocal_0
         getproperty Qname(PackageNamespace(""),"setScreen")
         findpropstrict Qname(PackageNamespace("com.company.assembleegameclient.game"),"GameSprite")
         getlocal 4
         getlocal 5
         getlocal 6
         getlocal 7
         getlocal 8
         getlocal 9
         getlocal_0
         getproperty Qname(PackageNamespace(""),"model")
         pushnull
         getlocal_0
         getproperty Qname(PackageNamespace(""),"data")
         getproperty Qname(PackageNamespace(""),"isFromArena")
         constructprop Qname(PackageNamespace("com.company.assembleegameclient.game"),"GameSprite") 9
         callpropvoid Qname(PackageNamespace(""),"dispatch") 1
         returnvoid
         end ; code
         end ; body
         end ; method
      }
      
      private function getInitialGameId() : int
      {
         trait method Qname(PrivateNamespace(null,"366"),"getInitialGameId")
         dispid 0
         method
         name null
         returns Qname(PackageNamespace(""),"int")
         
         body
         maxstack 1
         localcount 2
         initscopedepth 4
         maxscopedepth 5
         
         code
         getlocal_0
         pushscope
         pushbyte 0
         setlocal_1
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"data_")
         getproperty Multiname("needsTutorial",[PrivateNamespace(null,"366"),PackageNamespace(""),PackageNamespace("kabam.rotmg.game.commands"),PrivateNamespace(null,"1439"),PackageInternalNs("kabam.rotmg.game.commands"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("kabam.rotmg.game.commands:PlayGameCommand"),StaticProtectedNs("kabam.rotmg.game.commands:PlayGameCommand")])
         iffalse ofs0020
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"TUTORIAL_GAMEID")
         convert_i
         setlocal_1
         jump ofs0044
         ofs0020:getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"data_")
         getproperty Multiname("needsRandomRealm",[PrivateNamespace(null,"366"),PackageNamespace(""),PackageNamespace("kabam.rotmg.game.commands"),PrivateNamespace(null,"1439"),PackageInternalNs("kabam.rotmg.game.commands"),Namespace("http://adobe.com/AS3/2006/builtin"),ProtectedNamespace("kabam.rotmg.game.commands:PlayGameCommand"),StaticProtectedNs("kabam.rotmg.game.commands:PlayGameCommand")])
         iffalse ofs003b
         getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"RANDOM_REALM_GAMEID")
         convert_i
         setlocal_1
         jump ofs0044
         ofs003b:getlex Qname(PackageNamespace("com.company.assembleegameclient.parameters"),"Parameters")
         getproperty Qname(PackageNamespace(""),"NEXUS_GAMEID")
         convert_i
         setlocal_1
         ofs0044:getlocal_1
         returnvalue
         end ; code
         end ; body
         end ; method
      }
   }
}
